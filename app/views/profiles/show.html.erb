<div class="profile-container">
  <div class="profile-background-img" style="background: linear-gradient( 135deg, rgba(214, 55, 55, 0.8), #fbdd0a);"></div>
    <div class="profile-card" style="margin-top: -35px;">
      <% if @profile.photo.attached? %>
        <%= cl_image_tag @profile.photo.key, class: "avatar-img",
          height: 100, width: 100, radius: 100, crop: :fill, gravity: :face %>
      <% elsif !@profile.first_name.nil? && !@profile.last_name.nil? %>
        <%= "#{@profile.first_name[0]} #{@profile.last_name[0]}"%>
      <% end %>

      <h3>Hi, <%= "#{@profile.first_name} #{@profile.last_name}" %></h3>

      <% if current_user.following.include?(@profile.user) %>
        <%= link_to "Unfollow", unfollow_user_path(@profile.user), method: :post, class: "btn btn-outline-dark" %>
      <% else %>
        <%= link_to "Follow", follow_user_path(@profile.user), method: :post, class: "btn btn-dark" %>
      <% end %>

      <div class="collapse-elements">
        <div class="profile-card-icons">
          <p>
            <i class="fas fa-bookmark" type="icon" data-toggle="collapse" data-target="#collapseSaved" aria-expanded="false" aria-controls="collapseSaved"><small class="icon-text">Saved</small></i>
            <i class="fas fa-file-alt" type="icon" data-toggle="collapse" data-target="#collapseReview" aria-expanded="false" aria-controls="collapseReview"><small class="icon-text">Review</small></i>
            <i class="fa fa-user-edit" type="icon" data-toggle="collapse" data-target="#collapseEdit" aria-expanded="false" aria-controls="collapseEdit"><small class="icon-text">Edit</small></i>
          </p>
        </div>
      <div class="collapse-element1">
        <div class="collapse" id="collapseSaved">
          <div class="card card-body" style="padding: 0 0;">
            <% @restaurants.each do |restaurant| %>
              <% if restaurant.marked == true %>
                <div class="saved-restaurant-items">
                  <%= restaurant.name %>
              <% else %>
                  <h3>Nothing saved yet.</h3>
                </div>
              <% end %>
              <%= link_to "Review", new_restaurant_review_path(restaurant), class: "btn btn-warning jump-to-review" %>
            <% end %>
          </div>
        </div>
      </div>

      <div class="collapse-element2">
        <div class="collapse" id="collapseReview">
          <div class="card card-body" style="padding: 0 0;height: 350px;overflow-y: scroll;">
            <div class="user-review">
              <% @reviews.each do |review| %>
              <div class="each-review">
                <div class="restaurant-rating">
                  <h2><%= review.restaurant.name %></h2>
                  <h3><i class="fas fa-star user-review-star"></i><%= review.rating %></h3>
                </div>
                <h3><%= review.description %></h2>
                <h4><%= review.created_at %></h4>
              </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <div class="collapse-element3">
        <div class="collapse" id="collapseEdit">
          <div class="card card-body" style="padding: 0 0;height: 350px;overflow-y: scroll;">
            <%= simple_form_for @profile do |f| %>
              <%= f.input :gender, collection: [ [ "Male", 'Male' ], ['Female', 'Female'], ['Other', 'Other'] ], as: :radio_buttons, class: "gender-form" %>
            <%= f.input :age, collection: 15..99 %>
            <%= f.input :first_name %>
            <%= f.input :last_name %>
            <%= f.input :address %>
            <%= f.input :photo, as: :file, label: "avatar" %>
            <%= f.submit "Update", class: "btn btn-primary" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>



    </div>
  </div>
</div>


